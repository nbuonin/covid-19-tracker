(this["webpackJsonpcoronavirus-tracker"]=this["webpackJsonpcoronavirus-tracker"]||[]).push([[0],{234:function(e,a){},336:function(e,a,t){e.exports=t(450)},341:function(e,a,t){},343:function(e,a,t){},347:function(e,a){},450:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),l=t(186),c=t.n(l),s=(t(341),t(229)),o=t.n(s),m=t(286),d=t(67),u=t(230),i=t.n(u),h=(t(342),t(343),t(237)),p=function(){return r.a.createElement(h.a,{bg:"dark",variant:"dark",fixed:"top"},r.a.createElement(h.a.Brand,null,"US County COVID-19 Tracker"))},E=t(305),f=(t(346),t(478)),b=t(473),v=function(e){var a=e.countyData,t=e.maxCases,l=e.maxCasesPerT,c=e.maxDeaths,s=e.maxDeathsPerT,o=e.maxDeathsPerCase,m=e.activeCounty,u=e.setActiveCounty,i=e.mappedData,h=Object(n.useState)(),p=Object(d.a)(h,2),v=p[0],y=p[1],k=new b.a({id:"county-"+m+i,data:a,pickable:!0,stroked:!0,filled:!0,getFillColor:function(e){if(e.properties.CASES){var a=e.properties.CASES.length-1,n=e.properties.CASES[a],r=0;"cases"===i?r=n.cases/t:"casesPerK"===i?r=n.casesPerThousand/l:"deaths"===i?r=n.deaths/c:"deathsPerK"===i?r=n.deathsPerThousand/s:"deathsPerCase"===i&&(r=n.deathsPerCase/o);var d=r?230*r+25:0;return e.properties.GEOID===m?[0,0,0,127]:[65,61,87,d]}return[0,0,0,0]},getLineColor:function(e){return[0,0,0,255]},getLineWidth:function(e){return e.properties.GEOID===m?400:150},onHover:function(e,a){y({x:e.x,y:e.y,hoveredObject:e.object})},onClick:function(e,a){u(e.object.properties.GEOID)}});return r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement(f.a,{layers:[k],initialViewState:{latitude:40,longitude:-100,zoom:3,bearing:0,pitch:0},width:"100%",height:"100%",controller:!0},r.a.createElement(E.a,{reuseMaps:!0,width:"100%",height:"100%",preventStyleDiffing:!0,mapStyle:"mapbox://styles/mapbox/light-v9",mapboxApiAccessToken:"pk.eyJ1IjoibmJ1b25pbiIsImEiOiJjazhvaHdqMm4xOWI3M21tdzZwaGk1MTIyIn0.3b86Z8DJe70ypDfzIyAjpA"})),v&&function(){var e=v.x,a=v.y,t=v.hoveredObject,n=null;if(t&&t.properties.CASES){var l=t.properties.CASES.length-1;n=t.properties.CASES[l]}return t&&r.a.createElement("div",{className:"county-tooltip",style:{top:a,left:e,position:"absolute",pointerEvents:"none"}},r.a.createElement("div",{className:"tooltip-inner"},t.properties.NAME,r.a.createElement("table",{className:"county-tooltip__table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Cases:"),r.a.createElement("td",null,n?n.cases:"0")),r.a.createElement("tr",null,r.a.createElement("td",null,"Cases/1k:"),r.a.createElement("td",null,n?n.casesPerThousand.toFixed(2):"0")),r.a.createElement("tr",null,r.a.createElement("td",null,"Deaths:"),r.a.createElement("td",null,n?n.deaths:"0")),r.a.createElement("tr",null,r.a.createElement("td",null,"Deaths/1k:"),r.a.createElement("td",null,n?n.deathsPerThousand.toFixed(2):"0")),r.a.createElement("tr",null,r.a.createElement("td",null,"Fatality Rate:"),r.a.createElement("td",null,n?(100*n.deathsPerCase).toFixed(2):"0","%"))))))}())},y=t(477),k=t(481),C=t(475),x=t(480),P=function(e){var a=e.countyData,t=null,n=null;return a&&(t=a[a.length-1],n=a.reduce((function(e,a){return e.push({date:a.date.toLocaleDateString("en-US",{month:"numeric",day:"numeric",timeZone:"UTC"}),cases:a.cases,casesPerThousand:a.casesPerThousand,deaths:a.deaths,deathsPerThousand:a.deathsPerThousand,deathsPerCase:a.deathsPerCase}),e}),[])),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t.county," County, ",t.state),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Last updated:"),r.a.createElement("td",null,t.date.toLocaleDateString("en-US",{timeZone:"UTC"}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Cases:"),r.a.createElement("td",null,t.cases)),r.a.createElement("tr",null,r.a.createElement("th",null,"Cases per thousand:"),r.a.createElement("td",null,t.casesPerThousand.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("th",null,"Deaths:"),r.a.createElement("td",null,t.deaths)),r.a.createElement("tr",null,r.a.createElement("th",null,"Deaths per thousand:"),r.a.createElement("td",null,t.deathsPerThousand.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("th",null,"Fatality Rate*:"),r.a.createElement("td",null,(t.deaths/t.cases*100).toFixed(2),"%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Population (2019):"),r.a.createElement("td",null,t.population)))),r.a.createElement("div",null,r.a.createElement(y.a,{theme:k.a.material},r.a.createElement(C.a,{data:n,x:"date",y:"cases"}),r.a.createElement(x.a,{label:"Cases",dependentAxis:!0,padding:{bottom:100}}),r.a.createElement(x.a,{tickCount:4}))),r.a.createElement("div",null,r.a.createElement(y.a,{theme:k.a.material},r.a.createElement(C.a,{data:n,x:"date",y:"casesPerThousand"}),r.a.createElement(x.a,{label:"Cases/1k",dependentAxis:!0}),r.a.createElement(x.a,{tickCount:4}))),r.a.createElement("div",null,r.a.createElement(y.a,{theme:k.a.material},r.a.createElement(C.a,{data:n,x:"date",y:"deaths"}),r.a.createElement(x.a,{label:"Deaths",dependentAxis:!0}),r.a.createElement(x.a,{tickCount:4}))),r.a.createElement("div",null,r.a.createElement(y.a,{theme:k.a.material},r.a.createElement(C.a,{data:n,x:"date",y:"deathsPerThousand"}),r.a.createElement(x.a,{label:"Deaths/1k",dependentAxis:!0}),r.a.createElement(x.a,{tickCount:4}))),r.a.createElement("div",null,r.a.createElement(y.a,{theme:k.a.material},r.a.createElement(C.a,{data:n,x:"date",y:function(e){return 100*e.deathsPerCase}}),r.a.createElement(x.a,{label:"Fatality Rate",dependentAxis:!0}),r.a.createElement(x.a,{tickCount:4})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Select a county from the map to view Coronavirus case numbers."),r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"This map visualizes COVID-19 cases in US counties. It uses data from the New York Times, based on reports from state and local health agencies. The New York Times' maps can be found ",r.a.createElement("a",{href:"https://www.nytimes.com/interactive/2020/us/coronavirus-us-cases.html"},"here"),"."),r.a.createElement("h2",null,"Licenses"),r.a.createElement("p",null,"The code for this project is licensed under GNU GPL v3.0. This site makes no warranty as to the accuracy of the data set, and is intended for informational purposes only. The data used is accessed under ",r.a.createElement("a",{href:"https://github.com/nytimes/covid-19-data"},"license")," by the New York Times."))))},D=function(e){var a=e.mappedData,t=e.setMappedData,n=function(e){t(e.target.value)};return r.a.createElement("div",{id:"map-data-controls"},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"mapped-data",id:"mapped-data-casesK",value:"casesPerK",checked:"casesPerK"===a,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"mapped-data-casesK"},"Cases/1K")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"mapped-data",id:"mapped-data-cases",value:"cases",checked:"cases"===a,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"mapped-data-cases"},"Cases")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"mapped-data",id:"mapped-data-deathsK",value:"deathsPerK",checked:"deathsPerK"===a,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"mapped-data-deathsK"},"Deaths/1K")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"mapped-data",id:"mapped-data-deaths",value:"deaths",checked:"deaths"===a,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"mapped-data-deaths"},"Deaths")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"mapped-data",id:"mapped-data-deathsPerCase",value:"deathsPerCase",checked:"deathsPerCase"===a,onChange:n}),r.a.createElement("label",{className:"form-check-label",htmlFor:"mapped-data-deaths"},"Fatality Rate")))},S=function(){var e=Object(n.useState)(),a=Object(d.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(),s=Object(d.a)(c,2),u=s[0],h=s[1],p=Object(n.useState)(),E=Object(d.a)(p,2),f=E[0],b=E[1],y=Object(n.useState)(),k=Object(d.a)(y,2),C=k[0],x=k[1],S=Object(n.useState)(),T=Object(d.a)(S,2),N=T[0],O=T[1],w=Object(n.useState)(),g=Object(d.a)(w,2),j=g[0],A=g[1],I=Object(n.useState)(),F=Object(d.a)(I,2),K=F[0],G=F[1],M=Object(n.useState)(),U=Object(d.a)(M,2),J=U[0],L=U[1],z=Object(n.useState)("casesPerK"),H=Object(d.a)(z,2),R=H[0],W=H[1],Y=function(e,a){return 0===a?0:1e3*e/a};return Object(n.useEffect)((function(){var e=["36005","36061","36081","36047","36085"];(function(){var a=Object(m.a)(o.a.mark((function a(){var t,n,r,c,s,m,d,u,p,E,f,v,y,k,C,P,D,S;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("/data/county.json");case 2:if((t=a.sent).ok){a.next=5;break}throw new Error("HTTP Error: county GeoJSON not loaded");case 5:return a.next=7,t.json();case 7:return n=a.sent,a.next=10,fetch("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv");case 10:if((r=a.sent).ok){a.next=13;break}throw new Error("HTTP Error: case counts not loaded");case 13:return a.next=15,r.text();case 15:return c=a.sent,s=i.a.parse(c,{header:!0}),m=s.data,s.errors,s.meta,a.next=19,fetch("/data/census.csv");case 19:if((d=a.sent).ok){a.next=22;break}throw new Error("HTTP Error: census data not loaded");case 22:return a.next=24,d.text();case 24:u=a.sent,p=i.a.parse(u,{header:!0}),E=p.data,f=E.reduce((function(e,a){return e[a.GEOID]=Number(a.POPESTIMATE2019),e}),{}),v=0,y=0,k=0,C=0,P=0,D=m.reduce((function(e,a){if("Unknown"===a.county)return e;var t="New York City"===a.county?"99999":a.fips,n=new Date(a.date),r=f[t],l=Number(a.cases),c=Y(l,r),s=Number(a.deaths),o=Y(s,r),m=l>500?s/l:0;l>v&&(v=l),c>y&&(y=c),s>k&&(k=s),o>C&&(C=o),m>P&&(P=m);var d={date:n,state:a.state,county:a.county,population:r,cases:l,casesPerThousand:c,deaths:s,deathsPerThousand:o,deathsPerCase:m};if(e[t]){var u=e[t].findIndex((function(e){return e.date>n}));return u<0?(e[t].push(d),e):(e[t].splice(u,0,d),e)}return e[t]=[d],e}),{}),h(D),b(v),x(y),O(k),A(C),G(P),S=n.features.map((function(a){return e.includes(a.properties.GEOID)?(a.properties.GEOID="99999",a.properties.CASES=D[99999]||null,a):(a.properties.CASES=D[a.properties.GEOID]||null,a)})),n.features=S,l(n);case 42:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),console.log(K)}),[]),r.a.createElement("div",{id:"map-container",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"container"},r.a.createElement(P,{countyData:J?u[J]:null}))),r.a.createElement("div",{className:"col-8 sidebar"},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{mappedData:R,setMappedData:W}),r.a.createElement(v,{countyData:t,maxCases:f,maxCasesPerT:C,maxDeaths:N,maxDeathsPerT:j,maxDeathsPerCase:K,activeCounty:J,setActiveCounty:L,mappedData:R})))))};var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(p,null)),r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[336,1,2]]]);
//# sourceMappingURL=main.ab161f25.chunk.js.map